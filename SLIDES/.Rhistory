library(BiocManager)
pacman::p_load(ggplot2, tidyverse, gganimate, gapminder, gifski, ggExtra, treemapify,
ggmap, ggalt, processx, ggflags, vembedr, htmltools)
ggplot(mpg, aes(displ, hwy, color=class)) +
geom_point()+
geom_jitter(1000)
mtcars$`car name` <- rownames(mtcars)
mtcars$mpg_z <- round((mtcars$mpg - mean(mtcars$mpg)), 2)
mtcars <- mtcars[order(mtcars$mpg_z), ]  # sort
mtcars$`car name` <- factor(mtcars$`car name`, levels = mtcars$`car name`)
mtcars$mpg_type <- ifelse(mtcars$mpg_z < 0, "Abaixo", "Acima")
modificado <- ggplot(mtcars, aes(x=`car name`, y=mpg_z, label=mpg_z)) +
geom_point(stat='identity', aes(col=mpg_type), size=6)  +
scale_color_manual(name="Milhagem",
labels = c("Abaixo da média", "Acima da média"),
values = c("Acima"="#00ba38", "Abaixo"="#f8766d")) +
geom_text(color="white", size=2) +
labs(title="Eficiência energética",
y="Milhas acima da média",
x="Nome do carro") +
ylim(-15, 15) +
coord_flip()
modificado + geom_hline(yintercept = 0) + geom_encircle(data = subset(mtcars, mpg_type == "Acima"),spread = 0.0001)
ggplot(mpg, aes(displ, hwy, color=class)) +
geom_text(check_overlap = TRUE, label=mpg$manufacturer)
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
# library(Knitr)
library(png)
reviews <- read.csv("reviews.csv")
lists <- read.csv("listings.csv")
calendar <- read.csv("calendar.csv")
b1 <- str_which(reviews$listing_id.id.date.reviewer_id.reviewer_name.comments, "Brazil")
b2 <- str_which(reviews$listing_id.id.date.reviewer_id.reviewer_name.comments, "Brazilian")
b3 <- str_which(reviews$listing_id.id.date.reviewer_id.reviewer_name.comments, "Brasileiro")
for (i in (length(b1))){
print(reviews[b1[i], ])
}
for (i in (length(b2))){
print(reviews[b2[i], ])
}
for (i in (length(b3))){
print(reviews[b3[i], ])
}
for (i in 1:7){
print(reviews[b1[i], ])
}
reviews[b1[1]]
reviews[b1[1], ]
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
# library(Knitr)
library(png)
reviews <- read.csv("reviews.csv")
lists <- read.csv("listings.csv")
calendar <- read.csv("calendar.csv")
reviews
reviews[b1[1], ]
b1
b2
b3
b1
b1
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
b3 <- str_which(reviews$comments, "Brasileiro")
for (i in 1:7){
print(reviews[b1[i], ])
}
setwd("C:/Users/Tailine/Desktop/RStudio/2sem/lista 2")
for (i in (length(b2))){
print(reviews[b2[i], ])
}
for (i in (length(b3))){
print(reviews[b3[i], ])
}
for (i in (length(b2))){
print(reviews[b2[i], ])
}
for (i in 1:7){
print(reviews[b1[i], 5])
}
for (i in 1:7){
print(reviews[b1[i], 6])
}
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
b3 <- str_which(reviews$comments, "Brasileiro")
for (i in (length(b1))){
print(reviews[b1[i], 6])
}
for (i in (length(b2))){
print(reviews[b2[i], 6])
}
for (i in (length(b3))){
print(reviews[b3[i], 6])
}
length(b1)
for (i in (lenght(b1))){print(reviews[b1[i]], 6)}
for (i in (length(b1))){print(reviews[b1[i]], 6)}
for (i in (lenght(b1))){print(reviews[b1[i], 6])}
for (i in (length(b1))){print(reviews[b1[i], 6])}
reviews[14685, 6]
reviews[36408, 6]
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
b3 <- str_which(reviews$comments, "Brasileiro")
for (i in (length(b1))){
print(reviews[b1[i], 6])
}
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
b3 <- str_which(reviews$comments, "Brasileiro")
for (i in 1:(length(b1))){
print(reviews[b1[i], 6])
}
b1+(b1-b2)+b3
b1+b2
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
b3 <- str_which(reviews$comments, "Brasil")
btot <- b1+(b1-b2)+b3
for (i in 1:(length(b1))){
print(reviews[b1[i], 6])
}
btot
b1+b2
b1-b2
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
if (length(b1)>length(b2)){
n <- length(b1)
} else {
n <- length(b2)
}
btot <- list(b1)
for (i in 1:n){
if (b1[i]=b2[i]){
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
if (length(b1)>length(b2)){
n <- length(b1)
} else {
n <- length(b2)
}
btot <- list(b1)
for (i in 1:n){
if (b1[i]==b2[i]){
btot <-  btot
} else {
btot <- btot + b2[i]
}
}
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
if (length(b1)>length(b2)){
n <- length(b1)
} else {
n <- length(b2)
}
btot <- list(b1)
for (i in 1:n){
if (b1[i]==b2[i]){
btot <-  btot
} else {
btot <- btot + list(b2[i])
}
}
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
if (length(b1)>length(b2)){
n <- length(b1)
} else {
n <- length(b2)
}
btot <- list(b1)
for (i in 1:n){
if (b1[i]==b2[i]){
btot <-  btot
} else {
btot <- append(btot, b2[i])
}
}
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
if (length(b1)>length(b2)){
n <- length(b1)
} else {
n <- length(b2)
}
btot <- list(b1)
for (i in 1:n){
if (b1[i]!=b2[i]){
btot <- append(btot, b2[i])
}
}
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
if (length(b1)>length(b2)){
n <- length(b1)
} else {
n <- length(b2)
}
btot <- append(b1,b2)
for (i in 1:n){
print(reviews[btot[i], 6])
}
btot
b2-b1
b1
b2
unique(btot)
btot
btot
btot
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
b3 <- str_which(reviews$comments, "Brasileiro")
b4 <- str_which(reviews$comments, "Brasil")
if (length(b1)>length(b2)){
n <- length(b1)
} else {
n <- length(b2)
}
btotal <- append(b1,b2,b3,b4)
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
b3 <- str_which(reviews$comments, "Brasileiro")
b4 <- str_which(reviews$comments, "Brasil")
if (length(b1)>length(b2)){
n <- length(b1)
} else {
n <- length(b2)
}
btotal <- append(b1,b2)
btot <- unique(btotal)
for (i in 1:n){
print(reviews[btot[i], 6])
}
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
b3 <- str_which(reviews$comments, "Brasileiro")
b4 <- str_which(reviews$comments, "Brasil")
if (length(b1)>length(b2)){
n <- length(b1)
} else {
n <- length(b2)
}
btotal <- unique(append(b1,b2))
for (i in 1:n){
print(reviews[btot[i], 6])
}
b1
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
# library(Knitr)
library(png)
reviews <- read.csv("reviews.csv")
lists <- read.csv("listings.csv")
calendar <- read.csv("calendar.csv")
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
b3 <- str_which(reviews$comments, "Brasileiro")
b4 <- str_which(reviews$comments, "Brasil")
if (length(b1)>length(b2)){
n <- length(b1)
} else {
n <- length(b2)
}
btot <- unique(append(b1,b2))
for (i in 1:n){
print(reviews[btot[i], 6])
}
b2
b3
b4
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
b3 <- str_which(reviews$comments, "Brasileiro")
b4 <- str_which(reviews$comments, "Brasil")
if (b1 == interger(0)){
b1 <- 0
}
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
b3 <- str_which(reviews$comments, "Brasileiro")
b4 <- str_which(reviews$comments, "Brasil")
if (b1 == integer(0)){
b1 <- 0
}
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
b3 <- str_which(reviews$comments, "Brasileiro")
b4 <- str_which(reviews$comments, "Brasil")
if (b1 == "integer(0)"){
b1 <- 0
}
if (b2 == "integer(0)"){
b2 <- 0
}
if (b3 == "integer(0)"){
b3 <- 0
}
d <- str_count(reviews$comments, "Thank you")
d
d <- str_which(reviews$comments, "Thank you")
d
d1 <- str_which(reviews$comments, "Thank you")
d2 <- length(d1)
d2
length(b3)
b1 <- str_which(reviews$comments, "Brazil")
b2 <- str_which(reviews$comments, "Brazilian")
b3 <- str_which(reviews$comments, "Brasileiro")
b4 <- str_which(reviews$comments, "Brasil")
if (length(b1)==0){
b1 <- "não foi mencionado"
}
if (length(b2)==0){
b2 <- "não foi mencionado"
}
if (length(b3)==0){
b3 <- "não foi mencionado"
}
if (length(b4)==0){
b4 <- "não foi mencionado"
}
d1 <- str_which(reviews$comments, "Thank you")
d2 <- length(d1)
d2
d1
length(reviews$comments)
nchar(reviews$comments)
for (i in 1:(length(reviews$comments))){
stri_length(reviews$comments)
}
require(stringi)
for (i in 1:(length(reviews$comments))){
stri_length(reviews$comments)
}
g <- ggplot(mpg, aes(cty, hwy)) +
geom_count() +
geom_smooth(method="lm", se=F) +
theme(legend.position = "none")
ggMarginal(g, type = "density", fill="blue", alpha=.2, color="blue")
library(glue)
library(backports)
library(Rcpp)
library(stringi)
library(magick)
library(BiocManager)
pacman::p_load(ggplot2, tidyverse, gganimate, gapminder, gifski, ggExtra, treemapify,
ggmap, ggalt, processx, ggflags, vembedr, htmltools)
g <- ggplot(mpg, aes(cty, hwy)) +
geom_count() +
geom_smooth(method="lm", se=F) +
theme(legend.position = "none")
ggMarginal(g, type = "density", fill="blue", alpha=.2, color="blue")
g <- ggplot(mpg, aes(manufacturer))
g + geom_bar(aes(fill=class), width = 0.5) +
theme(axis.text.x = element_text(angle=65, vjust=0.6)) +
labs(title="Histogram on Categorical Variable",
subtitle="Manufacturer across Vehicle Classes")
g <- ggplot(mpg, aes(manufacturer))
g + geom_bar(aes(fill=class), width = 0.5) +
theme(axis.text.x = element_text(angle=65, vjust=0.6))
ggplot(mpg, aes(displ, hwy, color=class)) +
geom_text(check_overlap = TRUE, label=mpg$manufacturer)
d1 <- str_which(reviews$comments, "Thank you")
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
# library(Knitr)
library(png)
reviews <- read.csv("reviews.csv")
lists <- read.csv("listings.csv")
calendar <- read.csv("calendar.csv")
d1 <- str_which(reviews$comments, "Thank you")
d2 <- length(d1)
d1
d1 <- str_which$(reviews$comments, "Thank you")
g <- ggplot(mpg, aes(cty))
g + geom_density(aes(fill=factor(cyl)), alpha=0.8) +
labs(title="Density plot",
subtitle="City Mileage Grouped by Number of cylinders",
caption="Source: mpg",
x="City Mileage",
fill="# Cylinders")
g <- ggplot(mpg, aes(manufacturer))
g + geom_bar(aes(fill=class), width = 0.5) +
theme(axis.text.x = element_text(angle=65, vjust=0.6))
g <- ggplot(mpg, aes(manufacturer))
g + geom_bar(aes(fill=class), width = 0.5, position="dodge") +
theme(axis.text.x = element_text(angle=65, vjust=0.6)) +
labs(title="Histogram on Categorical Variable",
subtitle="Manufacturer across Vehicle Classes")
d1 <- str_which(reviews$comments, "Thank you$")
d2 <- length(d1)
reviews[1272, 6]
reviews[2732, 6]
"2732"
reviews[4754, 6]
reviews[8729]
reviews[8729,6]
reviews[9483,6]
reviews[9505,6]
d1
reviews
d1
reviews[10012,6]
reviews[12079,6]
library(stringi)
str_length(reviews$comments)
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
# library(Knitr)
library(png)
library(dplyr)
library(stringi)
reviews <- read.csv("reviews.csv")
lists <- read.csv("listings.csv")
calendar <- read.csv("calendar.csv")
h <- mean(str_length(reviews$comments))
h
c <- str_which(reviews$comments, "danger")
n <- 0
while (n<6){
for (i in (length(c))){
print(reviews[b[i], 6])
n <- n+1
}
}
c <- str_which(reviews$comments, "danger")
n <- 0
while (n<6){
for (i in (length(c))){
print(reviews[c[i], 6])
n <- n+1
}
}
c <- str_which(reviews$comments, "danger")
n <- 0
for (i in (length(c))){
print(reviews[c[i], 6])
n <- n+1
}
n
c <- str_which(reviews$comments, "danger")
if (length(c)>5){
n <- 0
while(n<6){
for (i in (length(c))){
print(reviews[c[i], 6])
n <- n+1
}
}
} else{
for (i in (length(c))){
print(reviews[c[i], 6])
}
}
c <- str_which(reviews$comments, "danger")
n <- 0
while(n<6){
for (i in 1:(length(c))){
print(reviews[c[i], 6])
n <- n+1
}
}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
# library(Knitr)
library(png)
library(dplyr)
library(stringi)
reviews <- read.csv("reviews.csv")
lists <- read.csv("listings.csv")
calendar <- read.csv("calendar.csv")
c <- str_which(reviews$comments, "danger")
n <- 0
while(n <= 5){
for (i in 1:(length(c))){
print(reviews[c[i], 6])
n <- n+1
}
}
c <- str_which(reviews$comments, "danger")
for (i in 1:5{
c <- str_which(reviews$comments, "danger")
for (i in 1:5){
print(reviews[c[i], 6])
n <- n+1
}
c2 <- str_which(reviews$comments, "dangerously")
for (i in 1:5){
print(reviews[c2[i], 6])
}
select(reviews$comments, starts_with("in"), ends_with("ing"))
select(comments, starts_with("in"), ends_with("ing"))
select(reviews$comments, starts_with("in"), ends_with("ing"))
grepl("^in", reviews$comments)
starts_with("in", reviews$comments)
starts_with(reviews$comments, "in")
?select
num <- c(str_count(reviews$comments, "!"))
e <- hist(num, col = "red", border = "darkblue", xlab = "Comments", ylab = "Frequency")
num <- c(str_count(reviews$comments, "!"))
e <- hist(num, col = "yellow", border = "black", xlab = "Comments", ylab = "Frequency")
palavras <- c(reviews$comments)
startsWith(reviews$comments, "in")
p <- c(reviews$comments)
startsWith(p, "in")
setwd("C:/Users/Tailine/Desktop/RStudio/beamer2")
